
add_action( 'wp_head', function () { ?>

<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }

    gtag('consent', 'default', {
        'ad_storage': 'denied',
        'analytics_storage': 'denied',
        'functionality_storage': 'granted',
        'personalization_storage': 'denied',
        'security_storage': 'denied',
    });
</script>

<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','xxx-xxxxxx');</script>
<!-- End Google Tag Manager -->

<?php } );

add_action( 'wp_body_open', function () { ?>

<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v2.7.2/dist/cookieconsent.js"></script>

<script>
    window.addEventListener('load', function () {

        // obtain plugin
        var cc = initCookieConsent();

        // run plugin with your configuration
        cc.run({

            gui_options: {
                consent_modal: {
                    layout: 'cloud',               // box/cloud/bar
                    position: 'bottom center',     // bottom/middle/top + left/right/center
                    transition: 'slide',           // zoom/slide
                    swap_buttons: false            // enable to invert buttons
                },
                settings_modal: {
                    layout: 'box',                 // box/bar
                    // position: 'left',           // left/right
                    transition: 'slide'            // zoom/slide
                }
            },

            current_lang: 'cs',
            autoclear_cookies: true,                   // default: false
            theme_css: 'https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v2.7.2/dist/cookieconsent.css',  // 游뚿 replace with a valid path
            page_scripts: true,                        // default: false

            mode: 'opt-in',                          // default: 'opt-in'; value: 'opt-in' or 'opt-out'
            // delay: 0,                               // default: 0
            auto_language: 'document',                      // default: null; could also be 'browser' or 'document'
            // autorun: true,                          // default: true
            // force_consent: false,                   // default: false
            // hide_from_bots: false,                  // default: false
            // remove_cookie_tables: false             // default: false
            // cookie_name: 'cc_cookie',               // default: 'cc_cookie'
            cookie_expiration: 182,                 // default: 182 (days)
            // cookie_necessary_only_expiration: 182   // default: disabled
            // cookie_domain: location.hostname,       // default: current domain
            // cookie_path: '/',                       // default: root
            // cookie_same_site: 'Lax',                // default: 'Lax'
            // use_rfc_cookie: false,                  // default: false
            // revision: 0,                            // default: 0


 onFirstAction: function (user_preferences, cookie) {
                    // callback triggered only once on the first accept/reject action
                },
    
                onAccept: function (cookie) {
                    if (cc.allowedCategory('analytics')) {
                        gtag('consent', 'update', {
                            'analytics_storage': 'granted'
                        });
						fbq('consent', 'grant');
                    }
                    if (cc.allowedCategory('advertising')) {
                        gtag('consent', 'update', {
                            'ad_storage': 'granted'
                        });
                    }
                    if (cc.allowedCategory('personalization')) {
                        gtag('consent', 'update', {
                            'personalization_storage': 'granted',
                        });
                    }
                    if (cc.allowedCategory('security')) {
                        gtag('consent', 'update', {
                            'security_storage': 'granted'
                        });
                    }
                },
    
                onChange: function (cookie, changed_categories) {
                    // callback triggered when user changes preferences after consent has already been given
                   if (cc.allowedCategory('analytics')) {
                        gtag('consent', 'update', {
                            'analytics_storage': 'granted'
                        });
						fbq('consent', 'grant');
                    }
                    if (!cc.allowedCategory('analytics')) {
                        gtag('consent', 'update', {
                            'analytics_storage': 'denied'
                        });
						fbq('consent', 'revoke');
                    }
                    if (cc.allowedCategory('advertising')) {
                        gtag('consent', 'update', {
                            'ad_storage': 'granted'
                        });
                    }
                    if (!cc.allowedCategory('advertising')) {
                        gtag('consent', 'update', {
                            'ad_storage': 'denied'
                        });
                    }
                    if (cc.allowedCategory('personalization')) {
                        gtag('consent', 'update', {
                            'personalization_storage': 'granted',
                        });
                    }
                    if (!cc.allowedCategory('personalization')) {
                        gtag('consent', 'update', {
                            'personalization_storage': 'denied',
                        });
                    }
                    if (cc.allowedCategory('security')) {
                        gtag('consent', 'update', {
                            'security_storage': 'granted'
                        });
                    }
                    if (!cc.allowedCategory('security')) {
                        gtag('consent', 'update', {
                            'security_storage': 'denied'
                        });
                    }
                },
    

            languages: {
                'cs': {
                    consent_modal: {
                        title: 'Pou쮂셨치me cookies',
                        description: 'Dobr칳 den, na na코em webu pou쮂셨치me cookies, abychom zjistili kolik lid칤 n치m sem chod칤 a jak칠 slu쬭y je zaj칤maj칤. Tyto soubory m콢쬰me pou쮂셨at pouze s va코칤m souhlasem. <button type="button" data-cc="c-settings" class="cc-link">Vyberte si jak칠 cookies chcete pou쮂셨at</button>',
                        primary_btn: {
                            text: 'P콏ijmout v코echny',
                            role: 'accept_all'              // 'accept_selected' or 'accept_all'
                        },
                        secondary_btn: {
                            text: 'Odm칤tnout v코echny',
                            role: 'accept_necessary'        // 'settings' or 'accept_necessary'
                        }
                    },
                    settings_modal: {
                        title: 'Vyberte si jak칠 cookies chcete p콏ijmout',
                        save_settings_btn: 'Ulo쬴t nastaven칤',
                        accept_all_btn: 'P콏ijmout v코echny',
                        reject_all_btn: 'Odm칤tnout v코echny',
                        close_btn_label: 'Zav콏칤t',
                        cookie_table_headers: [
                            { col1: 'Name' },
                            { col2: 'Domain' },
                            { col3: 'Expiration' },
                            { col4: 'Description' }
                        ],
                        blocks: [
                            {
                                title: 'Pou쮂셨치me cookies 游닉',
                                description: 'Soubory cookie pou쮂셨치m k zaji코t캩n칤 z치kladn칤ch funkc칤 webov칳ch str치nek a ke zlep코en칤 va코eho online z치쬴tku. U ka쬯칠 kategorie si m콢쬰te zvolit, zda se chcete p콏ihl치sit nebo odhl치sit, kdykoli budete cht칤t. Dal코칤 podrobnosti t칳kaj칤c칤 se soubor콢 cookie a dal코칤ch citliv칳ch 칰daj콢 naleznete v 칰pln칠m zn캩n칤. <a href="https://www.alessykora.cz/cookie-policy/" class="cc-link">Cookie policy</a>'
                            }, {
                                title: 'Nezbytn캩 nutn칠 soubory cookie',
                                description: 'Tyto soubory cookie jsou nezbytn칠 pro spr치vn칠 fungov치n칤 m칳ch webov칳ch str치nek. Bez t캩chto soubor콢 cookie by webov칠 str치nky nefungovaly spr치vn캩.',
                                toggle: {
                                    value: 'functionality',
                                    enabled: true,
                                    readonly: true          // cookie categories with readonly=true are all treated as "necessary cookies"
                                },
                                cookie_table: [             // list of all expected cookies
                                    {
                                        col1: 'cc-cookie',
                                        col2: 'Cookie Consent',
                                        col3: '182 dn칤',
                                        col4: 'Uchov치v치n칤 va코ich cookie preferenc칤',
                                    }
                                ]
                            }, {
                                title: 'V칳konnostn칤 a analytick칠 cookies',
                                description: 'Tyto soubory cookie umo쮄갓j칤 sledovat anonymn칤 n치v코t캩vnost webov칳ch str치nek.',
                                toggle: {
                                    value: 'analytics',     // your cookie category
                                    enabled: false,
                                    readonly: false
                                },
                                cookie_table: [             // list of all expected cookies
                                    {
                                        col1: '^_ga',       // match all cookies starting with "_ga"
                                        col2: 'google.com',
                                        col3: '2 roky',
                                        col4: 'Soubor cookie _ga, instalovan칳 slu쬭ou Google Analytics, vypo캜칤t치v치 칰daje o n치v코t캩vn칤c칤ch, relac칤ch a kampan칤ch a tak칠 sleduje pou쮂셨치n칤 webu pro analytickou zpr치vu webu. Soubor cookie ukl치d치 informace anonymn캩 a k rozpozn치n칤 jedine캜n칳ch n치v코t캩vn칤k콢 p콏i콏azuje n치hodn캩 vygenerovan칠 캜칤slo.',
                                        is_regex: true
                                    },
                                    {
                                        col1: '_gid',
                                        col2: 'google.com',
                                        col3: '1 den',
                                        col4: 'Soubor cookie _gid, instalovan칳 slu쬭ou Google Analytics, ukl치d치 informace o tom, jak n치v코t캩vn칤ci pou쮂셨aj칤 webov칠 str치nky, a z치rove켿 vytv치콏칤 analytickou zpr치vu o v칳konu webov칳ch str치nek. Mezi shroma쮃끒van칠 칰daje pat콏칤 po캜et n치v코t캩vn칤k콢, jejich zdroj a anonymn캩 nav코t칤ven칠 str치nky.',
                                    },
                                    {
                                        col1: 'gat',
                                        col2: 'google.com',
                                        col3: '1 minuta',
                                        col4: 'Tento soubor cookie neukl치d치 쮂멳n칠 informace o u쬴vateli, slou쮂 pouze k omezen칤 po캜tu po쬬davk콢, kter칠 mus칤 b칳t odesl치ny na web doubleclick.net.',
                                    }
                                ]
                            }, {
                                title: 'Reklamn칤 cookies',
                                description: 'Tyto soubory cookie umo쮄갓j칤 sledovat n치v코t캩vnost webov칳ch str치nek a identifikovat stejnou n치v코t캩vu.',
                                toggle: {
                                    value: 'advertising',     // your cookie category
                                    enabled: false,
                                    readonly: false
                                },
                                cookie_table: [             // list of all expected cookies
                                    {
                                        col1: 'sid',       // match all cookies starting with "_ga"
                                        col2: 'seznam.cz',
                                        col3: '30 dn칤',
                                        col4: 'Seznam.cz retargeting',
                                    }
                                ]
                            }, {
                                title: 'Personaliza캜n칤 cookies',
                                description: 'Tyto soubory cookie umo쮄갓j칤 upravovat web na m칤ru n치v코t캩vn칤kovi.',
                                toggle: {
                                    value: 'personalization',     // your cookie category
                                    enabled: false,
                                    readonly: false
                                },
                                cookie_table: [             // list of all expected cookies
                                    {
                                        col1: 'xxx',       // match all cookies starting with "_ga"
                                        col2: 'xxxxxxx.cz',
                                        col3: 'x dn칤',
                                        col4: 'popis cookie',
                                    }
                                ]
                            }, {
                                title: 'Bezpe캜nostn칤 cookies',
                                description: 'Tyto soubory cookie pom치haj칤 zabezpe캜it n치v코t캩vn칤ka na webu.',
                                toggle: {
                                    value: 'security',     // your cookie category
                                    enabled: false,
                                    readonly: false
                                },
                                cookie_table: [             // list of all expected cookies
                                    {
                                        col1: 'xxx',       // match all cookies starting with "_ga"
                                        col2: 'xxxxxxx.cz',
                                        col3: 'x dn칤',
                                        col4: 'popis cookie',
                                    }
                                ]
                            }, {
                                title: 'M치te n캩jak칠 dotazy?',
                                description: 'V p콏칤pad캩 jak칳chkoli dotaz콢 t칳kaj칤c칤ch se na코ich z치sad o souborech cookie a va코칤 volby se obra콘te na info@alessykora.cz.',
                            }
                        ]
                    }
                }
            }
        });
    });
</script>

<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=xxx-xxxxxx" height="0" width="0"
        style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<?php } );
